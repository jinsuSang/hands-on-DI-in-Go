# Go 프로그래밍 개발 환경에서 의존성 주입 실습

## 1장 개선을 멈추지 말라

의존성 주입 (DI) 는 의존 관계에 있는 함수나 구조체를 추상화하는 방식이다. 리소스 번경시에도 사용자 측의 코드는 변경될 필요가 없고 이를 분리(decoupling)이라고 한다.

- DI 는 의존성을 추상적이거나 일반적인 방법으로 표현함으로써 코드의 일부분에 대한 작업을 진행할 때 필요한 지식을 줄여준다.
- DI는 의존성으로부터 격리시켜 코드를 테스트할 수 있도록 한다.
- DI를 통해 어렵거나 불가능한 상황을 구성해서 신속하고 안정적으로 테스트할 수 있다
- DI는 코드를 확장하거나 변경할 때 영향을 최소화 한다.
- 의존성 주입은 코드 가독성을 높이고 확장 및 재사용에 유용하게 사용된다.

#### DI가 필요한 상황

- 코드 팽창 - code bloat
- 변경에 대한 저항 - resistance to change
- 낭비되는 노력 - wated effort
- 강한 결합 - tight coupling

##### 1. 코드 팽창

함수나 구조체에 너무 긴 코드가 있어 이해하기 힘들고 유지 및 테스트가 힘든 경우이다. 

- 너무 긴 메서드
- 거대한 구조체 
- 너무 많은 인수
- 너무 긴 조건 블록

코드를 더 작게 나눔으로써 복잡성을 줄이고 유지 관리와 테스트가 용이하도록 코드를 바꿀 수 있다

##### 2. 변경에 대한 저항

새로운 긴으을 추가하는 것이 어렵거나 시간이 많이 소요된다는 것을 의미한다.

- 변경의 분산

  한 구조체에 작은 변경을 가했을 경우 다른 구조체에도 변경이 필요한 상황을 의미한다.

- 상세 구현 내용 노출

  `함수의 매개변수로 인터페이스를 받아들이고 구조체를 반환하라` , 매개변수로 구조체를 전달받을 경우 해당 함수를 사용하는 사용자 코드가 특정 조건에 대해 한정된다.

##### 3. 낭비되는 노력

코드 유지 및 관리 비용이 필요 이상 높은 경우이다

- 과도하게 중복된 코드

- 과도한 주석

- 중첩되고 복잡한 코드

  가독성이 떨어지는 코드, 코드 구조나 네이밍에 소홀한 경우이다

- DRY/WET 코드

  DRY(Don't Repeat Yourself) 책임을 그룹화하고 깔끔하게 정리된 추상화를 통해 개발 과정에서 필요한 모든 형태의 중복을 지양하는 원칙이다.

  WET(Waste Everyone's Time)  동일한 책임이 여러 곳에 있음을 의미한다

DI 는 추상화를 통해 코드 중복을 줄이고 가독성과 유지 관리성을 향상시킨다

##### 4. 강한 결합

강한 결합이 두 객체 사이에 생기는 경우 한 객체 변경시 다른 객체도 변경되어야 한다. 이는 복잡도와 유지 관리 비용을 증가시킨다. 

- God 객체에 대한 의존

  God 객체는 너무 많은 정보를 담고 너무 많은 일을 수행하는 객체이다. 

- 순환 종속성

  재귀적으로 두 패키지가 서로를 의존하는 경우이다

- 객체 섞임

  한 객체가 다른 객체의 내부 구조에 대해 너무 많은 정보를 담고 있거나 접근 권한을 갖고 있을 때 발생한다.

- 요요 문제

  코드 상속 관계가 복잡해서 코드를 이해하기 위해 서로 다른 부분을 계속 넘겨봐야 하는 상황이다

- 기능에 대한 욕심

  함수가 다른 객체의 데이터와 함수를 광범위하게 사용하는 경우이다. 